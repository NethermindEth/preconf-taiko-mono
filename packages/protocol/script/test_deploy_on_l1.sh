#!/bin/sh

# This script is only used by `pnpm test:deploy`.
set -e

export PRIVATE_KEY=0xbcdf20249abf0ed6d944c0288fad489e33f66b3960d9e6229c1cd214ed3bbe31
export FORK_URL="http://139.162.249.67:32002"
PROPOSER=0x0000000000000000000000000000000000000000 \
TAIKO_TOKEN=0x0000000000000000000000000000000000000000 \
PROPOSER_ONE=0x0000000000000000000000000000000000000000 \
GUARDIAN_PROVERS="0x1000777700000000000000000000000000000001,0x1000777700000000000000000000000000000002,0x1000777700000000000000000000000000000003,0x1000777700000000000000000000000000000004,0x1000777700000000000000000000000000000005,0x1000777700000000000000000000000000000006,0x1000777700000000000000000000000000000007" \
TAIKO_L2_ADDRESS=0x1670000000000000000000000000000000010001 \
L2_SIGNAL_SERVICE=0x1670000000000000000000000000000000000005 \
CONTRACT_OWNER=0x8943545177806ED17B9F23F0a21ee5948eCaa776 \
PROVER_SET_ADMIN=0x8943545177806ED17B9F23F0a21ee5948eCaa776 \
TAIKO_TOKEN_PREMINT_RECIPIENT=0x8943545177806ED17B9F23F0a21ee5948eCaa776 \
TAIKO_TOKEN_NAME="Taiko Token" \
TAIKO_TOKEN_SYMBOL=TKO \
SHARED_ADDRESS_MANAGER=0x0000000000000000000000000000000000000000 \
L2_GENESIS_HASH=0xb72284b010a6f2041bc735c0aa0c4da3834c5ab83563f6bfe798a831ee734dbc \
PAUSE_TAIKO_L1=false \
PAUSE_BRIDGE=true \
NUM_MIN_MAJORITY_GUARDIANS=7 \
NUM_MIN_MINORITY_GUARDIANS=2 \
TIER_PROVIDER="devnet" \
forge script script/DeployOnL1.s.sol:DeployOnL1 \
    --fork-url $FORK_URL \
    --broadcast \
    --skip-simulation \
    --ffi \
    -vvvv \
    --private-key $PRIVATE_KEY \
    --block-gas-limit 100000000
